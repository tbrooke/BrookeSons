<html>
  <head>
    <title>
      Brooke and Sons
    </title>
    <link href='/stylesheets/screen.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/print.css' media='print' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/text.css' media='screen, print' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/site.css' media='screen' rel='stylesheet' type='text/css' />
    <!--[if lt IE 8]>
      <link href='/stylesheets/ie.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <![endif]-->
  </head>
  <body class='two-col'>
    <div id='content_container'>
      <div id='header'>
        <h1>Brooke and Sons Web Builders</h1>
      </div>
      <div id='content'>
        <div class='post'>
  <h2>
    <a href='/blog/2013/01/04/lets-learn-oauth2-clio-part-1/'>
      Learning Oauth 2
    </a>
  </h2>
  <h3>
    04 January 2013
  </h3>
  <h4>
    <a href='/blog/tags/Oauth/'>
      Oauth
    </a>
  </h4>
  <div class='content'>
    <h1>Learning Oauth2</h1>

<h2>Part I  of Creating an app using the Clio API</h2>

<p>The http specification and the REST specification (Representational State Transfer) form the backbone of the web. Through a RESTful interface browsers can communicate with web applications and web applications can communicate with each other. By providing a public API the owner of a web app can allow others to communicate with his app and allow for the exchange of data between his app and the world. Clio has recently published their RESTful API and this is a great boon to developers wanting to integrate with the Clio platform.</p>

<p>Clio is a cloud based law practice management tool developed in Ruby on Rails. The API documentation is located at: <a href="http://api-docs.goclio.com/v1/index.html">Clio API Docs</a>. Since Clio is a legal application designed for lawyers one of the primary considerations is the security of the data. By providing a public API you do not want to allow people to muck around with your data without proper authority and even then you want to keep their access limited. To do this you must utilize a modern authentication system such as OAuth.</p>

<p> The authentication used by Clio is the OAuth2 method and the first step in creating an application that communicates through the API is to get properly authenticated which sets up a secure session between the server and the client. Clio provides sample Ruby code that does this but it would be helpful to get familiar with the workings of OAuth2 before diving in. OAuth2 is a protocal adopted by Google and several others to establish a standardized secure web authentication protocal. The specification is set forth at <a href="http://oauth.net/2/">OAuth</a></p>

<p>The analogy set out in an introduction to OAuth2 is that of giving a valet key to a parking lot attendant. It grants limited access to your car but not full access to the trunk or whatever. It is the same with OAuth2 authentication. You can grant someone, or in most cases another web site, limited access to the resources on your web site without giving them a password or full access. Clio uses what is know as a <em>Grant type authorization</em> based on the obtaining of an authorization code or token to allow access.</p>

<p>Security, again, is a primary consideration, You are granting access under the covers by allowing a specified web site to issue a RESTful API request to Clio and then returning a json string in response to that request. Only the specified client from the specified web site, with the specified Client Id and Client Secret can do this and only for 10 minutes without renewed authority.</p>

<p>Some times it helps to manually walk through a procedure and one of the easiest ways to start working with OAuth2 is to check out Google's'</p>

<p><a href="https://developers.google.com/oauthplayground/">OAuth2 Playground</a></p>

<p> We will use the playground to demonstrate exactly how OAuth2 works.</p>

<p>To get started you have to set up the Clio side of things by creating a new app in your Clio account. The Clio documentation describes this process and it is fairly easy to get started. When setting up your application set up:</p>

<p> <em>https://developers.google.com/oauthplayground</em></p>

<p>As the url for your application since this is the callback url needed to connect Clio and the Google playground together. The Clio side is the server side of your application. When you have this set up you can go to the Google playground and set up the client side of the equation.</p>

<p>To set this up for Clio you must use a custom configuration which you can set up by clicking on the little sprocket on the top right hand side of the screen. This will produce a drop down window entitled OAuth2 configuration. You are creating a Server side configuration so indicate that in the selection window and for OAuth endpoints; you are using custom instead of Google. After you complete those fill in:</p>

<p>Authorization endpoint: https://app.goclio.com/oauth/authorize/</p>

<p>Token endpoint: https://app.goclio.com/oauth/token</p>

<p>Access Token location: Authorization header w/ Bearer prefix</p>

<p><img src="blog/assets/setup.png" alt="" /></p>

<p>Now put in the OAuth Client ID and Client Secret that you received from Clio</p>

<p>You are now set up and ready to move on to Step 2 where you set up and authorize the API. The way the authorization works is that you present your credentials, which we have just set up with the Client ID and Client Secret, to Clio and if everything is in order Clio issues an access token. This is sent back and by using that token you have access to Clio. The token is limited in that it can only be used by your Web Application to log into Clio and it is only good for 10 minutes.</p>

<p>Lets go over to the left hand side of the screen and beside the Authorize APIs button put in:</p>

<p>https://app.goclio.com/oauth/approval</p>

<p>now click on the Authorize APIs button and viola you're at Clio</p>

<p><img src="blog/assets/ClioConnect.png" alt="" /></p>

<p>Click OK and you will be taken back to Google with the access Token filled in for you:</p>

<p><img src="blog/assets/connected.png" alt="" /></p>

<p>Now you are ready to go and we can move on to step 3 which allows us to configure a request to the API</p>

<p>under HTTP Method Add Headers (in the little box above the request space) put in Host and for the header value put in:  app.goclio.com</p>

<p>Now we are ready to put in our RESTful request - We are performing a simple GET request which we can select in the selection window and let's start with something simple like Who am I</p>

<p>https://app.goclio.com//api/v1/users/who_am_i</p>

<p>If we have done everything right we get back:</p>

<p><img src="blog/assets/Me.png" alt="" /></p>

<pre><code>&#x000A;{"account":{"id":"8DTsvjEvjIfpufuz/vefRw","owner":{"id":343991381,"name":"Tom Brooke",&#x000A;   "url":"/api/v1/users/343991381"}, "name":"Law Office of Tom Brooke",&#x000A;   "maildrop_address":"643fedb36@maildrop.goclio.com","created_at":"2011-03-14T20:15:50+00:00",&#x000A;   "updated_at":"2012-11-15T00:07:53+00:00"},"user":{"id":343991381,"email":"tom.brooke@gmail.com",&#x000A;   "first_name":"Tom","last_name":"Brooke","time_zone":"Eastern Time (US & Canada)",&#x000A;   "enabled":true,"subscription_plan":"Attorney","created_at":"2011-03-14T20:15:51+00:00",&#x000A;   "updated_at":"2011-10-06T04:53:43+00:00"}}</pre>


<p></code></p>

<p>That's me - How cool is that !!</p>

<p>Now let's look up our matters which is only one at this point:</p>

<p>then enter your GET request as a full address ie: https://app.goclio.com//api/v1/matters</p>

<p>And viola we get our response:</p>

<pre><code>&#x000A;{"matters":[{"id":1017058013,"client":{"id":863215887,"name":"Sam May",&#x000A;  "url":"/api/v1/contacts/863215887"},&#x000A;  "display_number":"00001-May","description":"New Matter",&#x000A;  "status":"Open","open_date":"2013-01-04","close_date":null,"pending_date":null,&#x000A;  "location":"","client_reference":"","responsible_attorney":{"id":343991381,"name":"Tom Brooke",&#x000A;  "url":"/api/v1/users/343991381"},"billable":true,&#x000A;  "maildrop_address":"643fedb36+matter1017058013@maildrop.goclio.com",&#x000A;  "created_at":"2013-01-04T19:02:26+00:00","updated_at":"2013-01-04T19:02:26+00:00"}],&#x000A;  "records":1,"limit":1000,"next_offset":1017058013}</pre>


<p></code></p>

<p>Now you can go through the Clio routing table ![Routing Table] (http://api-docs.goclio.com/http-routingtable.html) and you can experiment with any query you want. That's it. Of course we will be performing all of this automatically as in the Ruby code provided by Clio or we can write our own code in Ruby, Clojure or whatever. In future posts we'll explore how to set this up using Ruby and create a simple Sinatra application that runs on Heroku and talks to the Clio API</p>

<p>Feel free to leave comments or questions and consider joining our Google Group at: <a href="https://groups.google.com/forum/?fromgroups=#!forum/clio-developers">Clio Developer Group</a> where we discuss these things. In the next post we'll put together a Sinatra app that uses the API and authentication we have covered here.</p>
  </div>
  <div class='comments'>
     <a href="http://brookesonsweb.com/blog/2013/01/04/lets-learn-oauth2-clio-part-1/#disqus_thread" data-disqus-identifier="">Comments</a>
  </div>
</div>
<div class='post'>
  <h2>
    <a href='/blog/2012/12/16/Twin-Maps-Revisited/'>
      Twin Maps Revisited
    </a>
  </h2>
  <h3>
    16 December 2012
  </h3>
  <h4>
    <a href='/blog/tags/twinmaps/'>
      twinmaps
    </a>
  </h4>
  <div class='content'>
    <p><em>Success is not a place at which one arrives but rather the spirit with which one undertakes and continues the journey.</em>
    Alex Noble   via the September 8, 2010 <a href="http://www.twinmaps.com/">Twinmaps</a> <a href="http://www.twinmaps.com/post/139283-arrival-in-cleveland">post</a> by Richard Brooke</p>
    
    <iframe src="http://player.vimeo.com/video/24402425?title=0&amp;byline=0&amp;portrait=0&amp;badge=0&amp;color=ffffff" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
    
    
    <p> <p><a href="http://vimeo.com/24402425">"Dear America" - Twin Maps Trailer</a> from <a href="http://vimeo.com/user4721457">Twin Maps</a> on <a href="http://vimeo.com">Vimeo</a>.</p></p>
    
    <p>A perfect start for the Brooke and Sons Blog</p>
  </div>
  <div class='comments'>
     <a href="http://brookesonsweb.com/blog/2012/12/16/Twin-Maps-Revisited/#disqus_thread" data-disqus-identifier="">Comments</a>
  </div>
</div>
<div class='post'>
  <h2>
    <a href='/blog/2012/12/05/clojure-day/'>
      Clojure Day Report
    </a>
  </h2>
  <h3>
    05 December 2012
  </h3>
  <h4>
    <a href='/blog/tags/clojure/'>
      clojure
    </a>
  </h4>
  <div class='content'>
    <p>Gregory Brown is well know in the Ruby Community and Mendicant University has spawned many Ruby developers. Recently he decided to step out of Ruby and take a look at Clojure. The result was Clojure Day and a summary follows:</p>

<p>In Practicing  <a href="https://practicingruby.com/articles/92">Ruby issue 5.8</a>  Gregory described his experiences in studying swarming behavior and how they lead to the discovery of a Rich Hickey <a href="https://gist.github.com/1093917">project</a> simulating an ant colony written in Clojure. Gregory decided to look into the Clojure code then Clojure itself and the Mendicant University Clojure Day was born. Several respondents expressed an interest in learning more about Clojure and it was decided that an email format would be best, with everyone researching on their own then reporting back to the group on November 29 [Clojure Day].</p>

<br />


<p>Gregory kicked things off around midnight on the 18th and a number of participants started in with their posts.  Several folks were doing some reading; Morgan Nelson started Marick's <a href="https://leanpub.com/fp-oo">Functional Programming for the Object Oriented Programmer</a>, a few others started reading <a href="http://pragprog.com/book/shcloj2/programming-clojure">Programming Clojure</a>. Also there was the usual tool discussion with some trying to tackle Emacs along with Clojure and others sticking with Vim or whatever.</p>

<br />


<p>Gregory went back to Puzzle Node #4 <a href="http://puzzlenode.com/puzzles/4-robots-vs-lasers">Robots v Lasers</a> and tried to port a solution from Ruby to Clojure:</p>

<br />


<p>So far, I've translated my parser class. Here's what I came up with:</p>

<pre><code>&#x000A;<br />&#x000A;------------------------------------------------------&#x000A;&#x000A;(def conveyor-symbols { \# :wall \| :laser })&#x000A;(def robot-symbol "X")&#x000A;&#x000A;(defn wall-data [text] (map #(conveyor-symbols %) text))&#x000A;&#x000A;(defn conveyor-data [input]&#x000A;  (let [[north middle south] (clojure.string/split input #"\n")]&#x000A;    { :north_side     (wall-data north)&#x000A;      :south_side     (wall-data south)&#x000A;      :robot_position (.indexOf middle robot-symbol)}))&#x000A;&#x000A;(pr (conveyor-data "#|#|#|##\n---X----\n###||###"))&#x000A;&#x000A;------------------------------------------------------&#x000A;&#x000A;The original Ruby code looked like this:&#x000A;&#x000A;------------------------------------------------------&#x000A;&#x000A;module Robotic&#x000A;  class Parser&#x000A;    CONVEYOR_SYMBOLS = { "#" => :wall, "|" => :laser }&#x000A;    ROBOT_SYMBOL = "X"&#x000A;&#x000A;    def initialize(text)&#x000A;      @text = text&#x000A;    end&#x000A;&#x000A;    def conveyor_data&#x000A;      north, middle, south = text.split&#x000A;      { :north_side => wall_data(north),&#x000A;        :south_side => wall_data(south),&#x000A;        :robot_position => middle.index(ROBOT_SYMBOL) }&#x000A;    end&#x000A;&#x000A;    private&#x000A;&#x000A;    attr_reader :text&#x000A;&#x000A;    def wall_data(wall_text)&#x000A;      wall_text.chars.map { |e| CONVEYOR_SYMBOLS[e] }&#x000A;    end&#x000A;  end&#x000A;end&#x000A;&#x000A;------------------------------------------------------&#x000A;</code></pre>


<br />


<p>He had not completed it but he stated how impressed he was that it was fairly easy</p>

<br />


<p>Shane Emmons revisited a Noir project  <a href="https://github.com/semmons99/emmons.io">emmons.io</a> he had started a couple of years ago and pointed out some views where he had done some work with <a href="https://github.com/weavejester/hiccup">Hiccup</a>, a Clojure based templating language:</p>

<br />


<p>Shane along with some others looked at <a href="http://www.4clojure.com/">4clojure</a> a Clojure problem site sort of like Puzzlenode or Ruby Koans.</p>

<br />


<p>Carol Nichols mentioned a talk by Stuart Holloway on the <a href="http://www.infoq.com/presentations/Impedance-Mismatch">impedence mismatch</a> between objects and relational databases lead to a discussion about <a href="http://www.datomic.com/">Datomic</a> but no one had much experience with it. Finally there was a general discussion about functional v object oriented programming.  We ended with a video of live programming using Clojure, Emacs and Supercollider in <a href="http://vimeo.com/22798433">Overtone</a></p>

<br />


<p>It was an interesting experience. It sounds like most of the participants intend to explore Clojure further but not formal plans were made.<br /></p>
  </div>
  <div class='comments'>
     <a href="http://brookesonsweb.com/blog/2012/12/05/clojure-day/#disqus_thread" data-disqus-identifier="">Comments</a>
  </div>
</div>
<div class='post'>
  <h2>
    <a href='/blog/2012/11/07/main-street-on-rails/'>
      Main Street Mission on Rails
    </a>
  </h2>
  <h3>
    07 November 2012
  </h3>
  <h4>
    <a href='/blog/tags/Rails/'>
      Rails
    </a>
  </h4>
  <div class='content'>
    <p><img width="386" height="325" alt="Main Street Mission" id="image18" src="/blog/assets/MainStreet-logo.jpg"/></p>

<p>I am a director at Main Street Mission in China Grove, North Carolina. In one of our planning sessions we decided that we needed to "computerize" our records. I am the "computer guy" so I started to see what we was available. I have worked with Rails some but I wasn't sure it would work in our situation. The inspiration that changed my mind was <a href="http://jordanbyron.com">Jordan Byron's</a>
<a href="https://github.com/mission-of-mercy/mission-of-mercy#readme">Mission of Mercy</a> project. I associated Rails with Web
apps and after firing up Mission of Mercy it opened my eyes to the fact
that Rails makes a great platform for an app that may or may not live on
the external web. Also I liked the way Jordan approached Rails as a tool to
do some social and humanitarian good rather than just a tool to launch a
startup and make a  million dollars. I am learning Rails and my Law firm
now runs on Clio which is a Rails app so I knew that Rails could be a good
fit for a business platform</p>

<p>I had looked at database platforms like Access, at off the shelf software
and even played with Salesforce some since they offer it free to nonprofits
and nothing seemed to be a good fit. After seeing Mission of Mercy I wrote
Jordan and told him that I was impressed with it and thought that something
similar would be a good fit for Main Street Mission, he agreed, told me he
was associated with <a href="http://mendicantuniversity.org">Mendicant University</a>, we got Corey on Board and here
we are. The scales were an early thing with the joke about Rails on scales and
one of the reasons that Jordan selected Corey was his skill with scales.</p>

<p>As it has developed I am very happy with the decision. Especially after two
Railsconf's I believe that one of the biggest advantages of Ruby and Rails
is the active and open community and the fact that both Ruby and Rails are
open source. This is a perfect fit for <a href="http://msm2.webvanta.com/">Main Street Mission</a> whose whole
purpose is to be an open and caring community. There may be other languages
and platforms that may be a better fit technically but there are no other
languages with the huge community that is willing to jump in and help each
other. It is the perfect way to carry the ethos of Main Street Mission out
of China Grove and I think it is a good to way bring some of the ethos of
the Rails community into China Grove and Main Street Mission</p>

<p>Rails also gives us some security because even if Mendicant University
disappears any Ruby developer with a github account can pick up
on our code and run with it. There are active Ruby communities in both
Charlotte and Raleigh so we can get local help if we need it. Also
hopefully the code will grow beyond us and other pantries can adopt it,
modify it and help each other</p>

<p>Finally from a technical perspective Rails has the speed and more than
enough sophistication to handle the project. It's user interface uses the
tools of the web so we have everything from html to handlebars for us to
work with.  We have ten of thousands of gems to help us. We have a platform
that embraces agile and behavior driven development which makes it perfect
for our non technical folks to keep up with the techies</p>

<p>So where else other than Rails could we get Anne, Robin and Tom squared
here in China Grove working with Corey in Pennsylvania, Jordan in Connecticut,
Shane in Seattle and others yet to come working together on a project like
this to help make it easier for a few folks in China Grove down on their
luck to get something to eat.</p>
  </div>
  <div class='comments'>
     <a href="http://brookesonsweb.com/blog/2012/11/07/main-street-on-rails/#disqus_thread" data-disqus-identifier="">Comments</a>
  </div>
</div>
<div class="pagination-links"><span class="current-page">1</span> </div>
      </div>
      <div id='sidebar_container'>
        <div id='sidebar'>
          <h2>Navigation</h2>
          <ul></ul>
          <li>
            <a href='/'>
              Home
            </a>
          </li>
          <li class='post-tags'>
            <a href='/blog/tags/'>
              Tag cloud
            </a>
            <h2>Contact</h2>
            <ul></ul>
            <li>
              <a href='http://twitter.com/tmb52'>
                @tmb52 on Twitter
              </a>
            </li>
            <li>
              <a href='https://github.com/tbrooke'>
                Github
              </a>
            </li>
            <h2>Projects</h2>
            <ul></ul>
            <li>
              <a href='http://twinmaps.com'>
                Twinmaps
              </a>
            </li>
            <li>
              <a href='http://github.com/MainStMission/food-pantry-manager'>
                Main Street Mission Food Pantry
              </a>
            </li>
          </li>
        </div>
      </div>
      <div id='footer'>
        Copyright 2012 Brooke and Sons Web Builders.
      </div>
      <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      </script>
      <script type="text/javascript">
      try {
      var pageTracker = _gat._getTracker("UA-37021710-1");
      pageTracker._trackPageview();
      } catch(err) {}</script>
    </div>
  </body>
</html>
